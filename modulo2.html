<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amenazas y Vectores de Ataque - CyberSec Elite Academy</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #0f172a;
            --secondary-color: #1e293b;
            --accent-color: #3b82f6;
            --gold-color: #f59e0b;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --light-bg: #f8fafc;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            line-height: 1.7;
            color: var(--text-primary);
            background: var(--light-bg);
        }

        /* Navigation */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            padding: 1rem 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: white;
            text-decoration: none;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--gold-color), #fbbf24);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .logo-text {
            font-size: 1.2rem;
            font-weight: 700;
            color: white;
        }

        .breadcrumb {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }

        .breadcrumb a {
            color: var(--gold-color);
            text-decoration: none;
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Main Container */
        .main-container {
            margin-top: 80px;
            display: flex;
            min-height: calc(100vh - 80px);
            max-width: 1600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Sidebar */
        .sidebar {
            background: white;
            border-right: 1px solid var(--border-color);
            padding: 2rem 0;
            width: 320px;
            min-width: 320px;
            max-width: 320px;
            height: calc(100vh - 80px);
            overflow-y: auto;
            position: sticky;
            top: 80px;
        }

        .module-info {
            padding: 0 2rem;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 2rem;
            padding-bottom: 2rem;
        }

        .module-number {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--danger-color), var(--warning-color));
            color: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .module-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .module-meta {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .progress-section {
            padding: 0 2rem;
            margin-bottom: 2rem;
        }

        .progress-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--danger-color), var(--warning-color));
            width: 15%;
            transition: width 0.3s ease;
        }

        .progress-text {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Chapter Navigation */
        .chapter-nav {
            list-style: none;
            padding: 0 1rem;
        }

        .chapter-item {
            margin-bottom: 0.5rem;
        }

        .chapter-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .chapter-link:hover {
            background: var(--light-bg);
            color: var(--primary-color);
        }

        .chapter-link.active {
            background: linear-gradient(135deg, var(--danger-color), var(--warning-color));
            color: white;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }

        .chapter-status {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            flex-shrink: 0;
        }

        .chapter-status.completed {
            background: var(--success-color);
            color: white;
        }

        .chapter-status.current {
            background: var(--danger-color);
            color: white;
        }

        /* Content Area */
        .content-area {
            flex: 1;
            padding: 2rem;
            max-width: calc(100vw - 320px);
            overflow-x: hidden;
        }

        .content-wrapper {
            max-width: 900px;
            margin: 0 auto;
        }

        .content-header {
            margin-bottom: 3rem;
        }

        .chapter-badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--danger-color), var(--warning-color));
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .content-title {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary-color);
            margin-bottom: 1rem;
            line-height: 1.2;
        }

        .content-description {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .chapter-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
            padding: 1.5rem;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .meta-item {
            text-align: center;
        }

        .meta-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--danger-color);
        }

        .meta-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Content Sections */
        .content-section {
            background: white;
            border-radius: 12px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border-left: 4px solid var(--danger-color);
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section-content {
            color: var(--text-primary);
            line-height: 1.7;
        }

        .section-content h3 {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-color);
            margin: 2rem 0 1rem 0;
        }

        .section-content p {
            margin-bottom: 1.5rem;
        }

        .section-content ul {
            margin-bottom: 1.5rem;
            padding-left: 1.5rem;
        }

        .section-content li {
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }

        .section-content strong {
            color: var(--primary-color);
            font-weight: 600;
        }

        .section-content code {
            background: #f1f5f9;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: var(--danger-color);
        }

        /* Threat Alert Box */
        .threat-alert {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(245, 158, 11, 0.1));
            border: 2px solid rgba(239, 68, 68, 0.2);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .threat-alert h4 {
            color: var(--danger-color);
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .threat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .threat-item {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            border-left: 3px solid var(--danger-color);
        }

        .threat-name {
            font-weight: 600;
            color: var(--primary-color);
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }

        .threat-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .threat-severity {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .severity-critical {
            background: #fecaca;
            color: #991b1b;
        }

        .severity-high {
            background: #fed7aa;
            color: #9a3412;
        }

        .severity-medium {
            background: #fef3c7;
            color: #92400e;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .stat-card {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border-top: 4px solid var(--danger-color);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--danger-color);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .stat-description {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
        }

        /* Interactive Simulator */
        .simulator-section {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 12px;
            padding: 2.5rem;
            margin: 2rem 0;
            border: none;
        }

        .simulator-title {
            color: var(--gold-color);
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .simulator-description {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 1.5rem;
        }

        .attack-simulator {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 2rem;
            margin: 1.5rem 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            font-family: 'Courier New', monospace;
        }

        .simulator-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .terminal-output {
            background: #000;
            color: #00ff00;
            padding: 1rem;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.9rem;
            height: 250px;
            overflow-y: auto;
            margin: 1rem 0;
            border: 1px solid #333;
        }

        .simulator-controls {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }

        .sim-btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .sim-btn-primary {
            background: var(--danger-color);
            color: white;
        }

        .sim-btn-primary:hover {
            background: #dc2626;
            transform: translateY(-2px);
        }

        .sim-btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .sim-btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Quiz Section */
        .quiz-section {
            background: white;
            border-radius: 12px;
            padding: 2.5rem;
            margin: 2rem 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border-left: 4px solid var(--success-color);
        }

        .quiz-question {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
        }

        .quiz-options {
            list-style: none;
        }

        .quiz-option {
            background: var(--light-bg);
            padding: 1rem;
            margin-bottom: 0.75rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .quiz-option:hover {
            background: #e0e7ff;
            border-color: var(--accent-color);
        }

        .quiz-option.selected {
            background: rgba(59, 130, 246, 0.1);
            border-color: var(--accent-color);
        }

        .quiz-option.correct {
            background: rgba(16, 185, 129, 0.1);
            border-color: var(--success-color);
        }

        .quiz-option.incorrect {
            background: rgba(239, 68, 68, 0.1);
            border-color: var(--danger-color);
        }

        /* Navigation Buttons */
        .content-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 4rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
            flex-wrap: wrap;
            gap: 1rem;
        }

        .nav-btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-btn-primary {
            background: linear-gradient(135deg, var(--danger-color), var(--warning-color));
            color: white;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }

        .nav-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(239, 68, 68, 0.4);
        }

        .nav-btn-secondary {
            background: white;
            color: var(--text-secondary);
            border: 2px solid var(--border-color);
        }

        .nav-btn-secondary:hover {
            border-color: var(--accent-color);
            color: var(--accent-color);
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding: 2rem 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 20px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border-color);
        }

        .timeline-item {
            position: relative;
            padding-left: 4rem;
            margin-bottom: 2rem;
        }

        .timeline-marker {
            position: absolute;
            left: 10px;
            top: 0;
            width: 20px;
            height: 20px;
            background: var(--danger-color);
            border-radius: 50%;
            border: 3px solid white;
        }

        .timeline-content {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .timeline-date {
            color: var(--danger-color);
            font-weight: 600;
            font-size: 0.9rem;
        }

        .timeline-title {
            font-weight: 600;
            color: var(--primary-color);
            margin: 0.5rem 0;
        }

        .timeline-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* MITRE ATT&CK Section */
        .mitre-section {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.05), rgba(16, 185, 129, 0.05));
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .mitre-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .mitre-tactic {
            background: white;
            padding: 1rem;
            border-radius: 8px;
            border-left: 3px solid var(--accent-color);
        }

        .mitre-id {
            font-family: monospace;
            font-size: 0.8rem;
            color: var(--accent-color);
            font-weight: 600;
        }

        .mitre-name {
            font-weight: 600;
            margin: 0.5rem 0;
        }

        .mitre-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Case Study Section */
        .case-study {
            background: #fafafa;
            border-left: 4px solid var(--warning-color);
            border-radius: 0 8px 8px 0;
            padding: 2rem;
            margin: 2rem 0;
        }

        .case-study-title {
            color: var(--warning-color);
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }

        .case-study-content {
            color: var(--text-primary);
            line-height: 1.6;
        }

        /* IOC Table */
        .ioc-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .ioc-table th,
        .ioc-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .ioc-table th {
            background: var(--light-bg);
            font-weight: 600;
            color: var(--primary-color);
        }

        .ioc-table code {
            background: #f1f5f9;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.85rem;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .main-container {
                max-width: 100%;
            }
            
            .content-title {
                font-size: 2.2rem;
            }
        }

        @media (max-width: 1024px) {
            .main-container {
                flex-direction: column;
            }

            .sidebar {
                position: relative;
                width: 100%;
                max-width: 100%;
                height: auto;
                top: 0;
            }

            .content-area {
                max-width: 100%;
            }

            .chapter-meta {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .nav-container {
                padding: 0 1rem;
                flex-wrap: wrap;
                gap: 1rem;
            }

            .content-area {
                padding: 1rem;
            }

            .content-title {
                font-size: 2rem;
            }

            .threat-grid {
                grid-template-columns: 1fr;
            }

            .simulator-controls {
                flex-direction: column;
            }

            .content-navigation {
                flex-direction: column;
            }

            .chapter-meta {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }

            .simulator-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .chapter-meta {
                grid-template-columns: 1fr;
            }
            
            .content-section {
                padding: 1.5rem;
            }
            
            .simulator-section {
                padding: 1.5rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="#" class="logo" onclick="goBack()">
                <div class="logo-icon">🛡️</div>
                <div class="logo-text">CyberSec Elite</div>
            </a>
            <div class="breadcrumb">
                <a href="#" onclick="goBack()">Inicio</a> / <a href="#" onclick="goBack()">Módulos</a> / Amenazas y Vectores de Ataque
            </div>
            <a href="#" class="back-btn" onclick="goBack()">
                ← Volver al Inicio
            </a>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="module-info">
                <div class="module-number">2</div>
                <h2 class="module-title">Amenazas y Vectores de Ataque</h2>
                <div class="module-meta">
                    ⏱️ 10 semanas • 🎯 Elite • 📚 15 capítulos
                </div>
            </div>

            <div class="progress-section">
                <div class="progress-title">Progreso del Módulo</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="moduleProgress"></div>
                </div>
                <div class="progress-text">1 de 15 capítulos completados (7%)</div>
            </div>

            <ul class="chapter-nav">
                <li class="chapter-item">
                    <a href="#" class="chapter-link active" onclick="loadChapter(1)">
                        <div class="chapter-status current">1</div>
                        <span>Panorama de Amenazas 2025</span>
                    </a>
                </li>
                <li class="chapter-item">
                    <a href="#" class="chapter-link" onclick="loadChapter(2)">
                        <div class="chapter-status">2</div>
                        <span>Phishing Avanzado & Social Engineering</span>
                    </a>
                </li>
                <li class="chapter-item">
                    <a href="#" class="chapter-link" onclick="loadChapter(3)">
                        <div class="chapter-status">3</div>
                        <span>Malware Contemporáneo & APTs</span>
                    </a>
                </li>
                <li class="chapter-item">
                    <a href="#" class="chapter-link" onclick="loadChapter(4)">
                        <div class="chapter-status">4</div>
                        <span>Ransomware-as-a-Service</span>
                    </a>
                </li>
                <li class="chapter-item">
                    <a href="#" class="chapter-link" onclick="loadChapter(5)">
                        <div class="chapter-status">5</div>
                        <span>Living Off The Land</span>
                    </a>
                </li>
                <li class="chapter-item">
                    <a href="#" class="chapter-link" onclick="loadChapter(6)">
                        <div class="chapter-status">6</div>
                        <span>OWASP Top 10 - Vulnerabilidades Web</span>
                    </a>
                </li>
                <li class="chapter-item">
                    <a href="#" class="chapter-link" onclick="loadChapter(7)">
                        <div class="chapter-status">7</div>
                        <span>Supply Chain Attacks</span>
                    </a>
                </li>
                <li class="chapter-item">
                    <a href="#" class="chapter-link" onclick="loadChapter(8)">
                        <div class="chapter-status">8</div>
                        <span>Amenazas Internas & Insider Threats</span>
                    </a>
                </li>
                <li class="chapter-item">
                    <a href="#" class="chapter-link" onclick="loadChapter(9)">
                        <div class="chapter-status">9</div>
                        <span>AI-Powered Attacks & Deepfakes</span>
                    </a>
                </li>
                <li class="chapter-item">
                    <a href="#" class="chapter-link" onclick="loadChapter(10)">
                        <div class="chapter-status">10</div>
                        <span>Cloud Native Attacks</span>
                    </a>
                </li>
                <li class="chapter-item">
                    <a href="#" class="chapter-link" onclick="loadChapter(11)">
                        <div class="chapter-status">11</div>
                        <span>TTPs y MITRE ATT&CK Framework</span>
                    </a>
                </li>
                <li class="chapter-item">
                    <a href="#" class="chapter-link" onclick="loadChapter(12)">
                        <div class="chapter-status">12</div>
                        <span>Threat Intelligence & CTI</span>
                    </a>
                </li>
                <li class="chapter-item">
                    <a href="#" class="chapter-link" onclick="loadChapter(13)">
                        <div class="chapter-status">13</div>
                        <span>Detección y Respuesta (EDR/XDR)</span>
                    </a>
                </li>
                <li class="chapter-item">
                    <a href="#" class="chapter-link" onclick="loadChapter(14)">
                        <div class="chapter-status">14</div>
                        <span>Casos de Estudio Reales</span>
                    </a>
                </li>
                <li class="chapter-item">
                    <a href="#" class="chapter-link" onclick="loadChapter(15)">
                        <div class="chapter-status">15</div>
                        <span>Stack Defensivo Moderno</span>
                    </a>
                </li>
            </ul>
        </aside>

        <!-- Content Area -->
        <main class="content-area">
            <div class="content-wrapper">
                <header class="content-header">
                    <div class="chapter-badge">🚨 Capítulo 1</div>
                    <h1 class="content-title">Panorama de Amenazas 2025</h1>
                    <p class="content-description">
                        Análisis elite del ecosistema de amenazas actual: actores, vectores sofisticados, 
                        tendencias críticas y la evolución de las técnicas de ataque en el ciberespacio moderno.
                    </p>
                    
                    <div class="chapter-meta">
                        <div class="meta-item">
                            <div class="meta-value">120</div>
                            <div class="meta-label">Minutos</div>
                        </div>
                        <div class="meta-item">
                            <div class="meta-value">6</div>
                            <div class="meta-label">Simuladores</div>
                        </div>
                        <div class="meta-item">
                            <div class="meta-value">3</div>
                            <div class="meta-label">Quizzes</div>
                        </div>
                        <div class="meta-item">
                            <div class="meta-value">94%</div>
                            <div class="meta-label">Tasa de Éxito</div>
                        </div>
                    </div>
                </header>

                <!-- Content Sections -->
                <section class="content-section">
                    <h2 class="section-title">🎯 Objetivos de Aprendizaje Elite</h2>
                    <div class="section-content">
                        <p>Al dominar este capítulo, serás capaz de:</p>
                        <ul>
                            <li><strong>Identificar y clasificar</strong> actores de amenazas según sofisticación, motivación y TTPs</li>
                            <li><strong>Analizar tendencias emergentes</strong> en el panorama global de ciberseguridad</li>
                            <li><strong>Mapear amenazas a MITRE ATT&CK</strong> para mejorar defensas organizacionales</li>
                            <li><strong>Evaluar la industrialización</strong> del cibercrimen y modelos CaaS</li>
                            <li><strong>Aplicar threat intelligence</strong> para predicción y mitigación proactiva</li>
                            <li><strong>Correlacionar geopolítica</strong> con operaciones cibernéticas estatales</li>
                        </ul>
                    </div>
                </section>

                <!-- Resumen Ejecutivo -->
                <section class="content-section">
                    <h2 class="section-title">📋 Resumen Ejecutivo</h2>
                    <div class="section-content">
                        <p>
                            <strong>Las amenazas actuales combinan actores muy distintos</strong> (ciberdelincuentes organizados, 
                            grupos APT estatales, insiders, script kiddies) con <strong>vectores más sofisticados</strong>: 
                            phishing avanzado & suplantación (incluyendo deepfakes), malware moderno y APTs, explotación de 
                            aplicaciones web (OWASP Top 10), ataques a la cadena de suministro y amenazas internas.
                        </p>
                        <p>
                            Estos ataques aprovechan tanto <strong>fallos técnicos</strong> (vulnerabilidades, 
                            malas configuraciones) como <strong>humanos</strong> (ingeniería social, negligencia), 
                            creando un ecosistema híbrido de amenazas que requiere defensas multicapa y 
                            respuestas adaptativas.
                        </p>
                        
                        <h3>Fuentes de Referencia Elite</h3>
                        <ul>
                            <li><strong>OWASP.org</strong> - Vulnerabilidades de aplicaciones web</li>
                            <li><strong>MITRE ATT&CK</strong> - Framework de técnicas y tácticas</li>
                            <li><strong>CISA.gov</strong> - Alertas y guías gubernamentales</li>
                            <li><strong>Unit 42, CrowdStrike, Mandiant</strong> - Threat intelligence comercial</li>
                        </ul>
                    </div>
                </section>

                <!-- Estadísticas del Panorama -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">68%</div>
                        <div class="stat-label">Incremento en Ataques Dirigidos</div>
                        <div class="stat-description">Comparado con 2024</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">$4.45M</div>
                        <div class="stat-label">Costo Promedio de Brecha</div>
                        <div class="stat-description">USD según IBM Security</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">277</div>
                        <div class="stat-label">Días Promedio de Detección</div>
                        <div class="stat-description">Para identificar una brecha</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">89%</div>
                        <div class="stat-label">Involucran Error Humano</div>
                        <div class="stat-description">De todas las brechas de seguridad</div>
                    </div>
                </div>

                <!-- Tendencias Críticas -->
                <section class="content-section">
                    <h2 class="section-title">📈 Tendencias Críticas 2025</h2>
                    <div class="section-content">
                        <h3>Dominancia del Ransomware y Extorsión</h3>
                        <p>
                            <strong>Grupos RaaS (Ransomware-as-a-Service)</strong> combinan herramientas sofisticadas 
                            con modelos comerciales. LockBit, BlackCat (ALPHV), y Conti han democratizado el ransomware, 
                            permitiendo que afiliados sin conocimientos técnicos lancen campañas devastadoras.
                        </p>
                        
                        <h3>Supply Chain Attacks</h3>
                        <p>
                            <strong>Actualizaciones o componentes comprometidos</strong> son extremadamente peligrosos 
                            por su alcance masivo. Casos como SolarWinds (SUNBURST) y Kaseya demuestran cómo un 
                            solo punto de compromiso puede afectar miles de organizaciones downstream.
                        </p>
                        
                        <h3>Malware "Living-off-the-Land" y Fileless</h3>
                        <p>
                            <strong>Abuso de herramientas legítimas</strong> como PowerShell, WMI, PsExec para 
                            permanecer furtivos. Estas técnicas evaden la detección tradicional basada en 
                            firmas, requiriendo análisis comportamental avanzado.
                        </p>
                        
                        <h3>Phishing Cada Vez Más Personalizado</h3>
                        <p>
                            <strong>Spear phishing, BEC, y ahora deepfakes</strong> que evitan filtros genéricos. 
                            La integración de IA generativa permite crear contenido convincente a escala masiva.
                        </p>
                    </div>
                </section>

                <!-- Threat Alert Box -->
                <div class="threat-alert">
                    <h4>🚨 Amenazas Críticas Actuales - Análisis Elite</h4>
                    <div class="threat-grid">
                        <div class="threat-item">
                            <div class="threat-name">Ransomware-as-a-Service (RaaS)</div>
                            <div class="threat-description">
                                Ecosistema criminal profesionalizado: Conti, LockBit, BlackCat operan como 
                                corporaciones con I+D, soporte 24/7, y programas de afiliados sofisticados. 
                                Democratizan ataques de alto impacto.
                            </div>
                            <span class="threat-severity severity-critical">CRÍTICA</span>
                        </div>
                        <div class="threat-item">
                            <div class="threat-name">Living Off The Land (LOTL)</div>
                            <div class="threat-description">
                                Weaponización de herramientas administrativas legítimas (PowerShell, WMI, WMIC) 
                                para evadir EDR tradicional. Técnicas como process hollowing y DLL sideloading.
                            </div>
                            <span class="threat-severity severity-high">ALTA</span>
                        </div>
                        <div class="threat-item">
                            <div class="threat-name">AI-Powered Social Engineering</div>
                            <div class="threat-description">
                                Deepfakes de voz/video para BEC, ChatGPT para phishing personalizado, 
                                automatización de OSINT para spear phishing dirigido a executives.
                            </div>
                            <span class="threat-severity severity-high">ALTA</span>
                        </div>
                        <div class="threat-item">
                            <div class="threat-name">Supply Chain Compromise</div>
                            <div class="threat-description">
                                Inserción de backdoors en pipelines de software (SolarWinds), compromiso de 
                                MSPs (Kaseya), y ataques a dependencias de código abierto (Log4Shell).
                            </div>
                            <span class="threat-severity severity-critical">CRÍTICA</span>
                        </div>
                    </div>
                </div>

                <!-- Framework Kill Chain -->
                <section class="content-section">
                    <h2 class="section-title">🔗 Kill Chain y Modelos de Ataque</h2>
                    <div class="section-content">
                        <h3>Cyber Kill Chain / Adversary Lifecycle</h3>
                        <p>
                            Entender las fases de un ataque permite implementar defensas en profundidad:
                        </p>
                        <ul>
                            <li><strong>Reconocimiento:</strong> OSINT, scanning, identificación de objetivos</li>
                            <li><strong>Gaining Initial Access:</strong> Phishing, exploits, credenciales comprometidas</li>
                            <li><strong>Execution:</strong> Malware deployment, scripts, living-off-the-land</li>
                            <li><strong>Persistence:</strong> Registry keys, scheduled tasks, service installation</li>
                            <li><strong>Privilege Escalation:</strong> Exploit vulnerabilities, credential dumping</li>
                            <li><strong>Lateral Movement:</strong> Network traversal, SMB, RDP abuse</li>
                            <li><strong>Exfiltration:</strong> Data theft, staging, covert channels</li>
                            <li><strong>Impact:</strong> Ransomware, destruction, disruption</li>
                        </ul>
                        
                        <h3>MITRE ATT&CK Framework</h3>
                        <p>
                            <strong>Biblioteca pública de técnicas/tácticas reales</strong> para mapear y detectar 
                            comportamientos adversos. Imprescindible para threat hunting y detección basada 
                            en comportamientos. Permite priorizar inversiones defensivas según TTPs observados.
                        </p>
                    </div>
                </section>

                <!-- MITRE ATT&CK Interactive Section -->
                <div class="mitre-section">
                    <h3>🎯 Técnicas MITRE ATT&CK Más Observadas</h3>
                    <p>Mapeo de las tácticas más utilizadas por grupos APT y cibercriminales:</p>
                    <div class="mitre-grid">
                        <div class="mitre-tactic">
                            <div class="mitre-id">T1566.001</div>
                            <div class="mitre-name">Spearphishing Attachment</div>
                            <div class="mitre-description">Emails maliciosos con archivos adjuntos weaponizados (Office macros, PDFs)</div>
                        </div>
                        <div class="mitre-tactic">
                            <div class="mitre-id">T1059.001</div>
                            <div class="mitre-name">PowerShell</div>
                            <div class="mitre-description">Ejecución de comandos y scripts PowerShell para post-explotación</div>
                        </div>
                        <div class="mitre-tactic">
                            <div class="mitre-id">T1055</div>
                            <div class="mitre-name">Process Injection</div>
                            <div class="mitre-description">Inyección de código malicioso en procesos legítimos</div>
                        </div>
                        <div class="mitre-tactic">
                            <div class="mitre-id">T1071.001</div>
                            <div class="mitre-name">Web Protocols</div>
                            <div class="mitre-description">C2 usando HTTP/HTTPS para evadir detección de tráfico</div>
                        </div>
                        <div class="mitre-tactic">
                            <div class="mitre-id">T1003.001</div>
                            <div class="mitre-name">LSASS Memory</div>
                            <div class="mitre-description">Dumping de credenciales desde LSASS (Mimikatz)</div>
                        </div>
                        <div class="mitre-tactic">
                            <div class="mitre-id">T1082</div>
                            <div class="mitre-name">System Information Discovery</div>
                            <div class="mitre-description">Reconocimiento interno para lateral movement</div>
                        </div>
                    </div>
                </div>

                <!-- Geografia de Amenazas -->
                <section class="content-section">
                    <h2 class="section-title">🌍 Geografía de las Amenazas</h2>
                    <div class="section-content">
                        <p>
                            <strong>El cibercrimen ha desarrollado una geografía específica</strong>, con diferentes 
                            regiones especializándose en tipos particulares de amenazas y desarrollando 
                            ecosistemas criminales únicos.
                        </p>
                        
                        <h3>Regiones de Alto Riesgo y Especialización</h3>
                        <ul>
                            <li><strong>Europa del Este (Rusia, Ucrania, Romania):</strong> Ransomware, fraude bancario, carding, botnets</li>
                            <li><strong>Asia-Pacífico (China, Corea del Norte):</strong> APTs estatales, espionaje industrial, zero-days</li>
                            <li><strong>América Latina (Brasil, México):</strong> Fraude móvil, banking trojans, POS malware</li>
                            <li><strong>Oriente Medio (Irán):</strong> Hacktivismo, ataques destructivos, wiper malware</li>
                            <li><strong>África Occidental (Nigeria):</strong> Fraude de CEO, romance scams, BEC</li>
                        </ul>
                        
                        <h3>Factores Geopolíticos y APTs Estatales</h3>
                        <p>
                            Los conflictos geopolíticos han intensificado las operaciones cibernéticas estatales. 
                            <strong>Grupos como APT28 (Fancy Bear - Rusia), Lazarus (Corea del Norte), APT40 
                            (China) y Phosphorus (Irán)</strong> han incrementado sus actividades en un 340% desde 2022.
                        </p>
                        
                        <h3>Ecosistemas Underground</h3>
                        <p>
                            Mercados criminales operan con sofisticación comparable a plataformas de e-commerce: 
                            sistemas de reputación, soporte 24/7, garantías de producto, y programas de fidelización.
                        </p>
                    </div>
                </section>

                <!-- Timeline de Amenazas -->
                <section class="content-section">
                    <h2 class="section-title">📅 Evolución Temporal de Amenazas 2024-2025</h2>
                    <div class="timeline">
                        <div class="timeline-item">
                            <div class="timeline-marker"></div>
                            <div class="timeline-content">
                                <div class="timeline-date">Q1 2024</div>
                                <div class="timeline-title">Explosión de AI-Powered Phishing</div>
                                <div class="timeline-description">
                                    ChatGPT y LLMs utilizados masivamente para crear emails convincentes, 
                                    automatizar OSINT y generar contenido personalizado a escala industrial.
                                </div>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-marker"></div>
                            <div class="timeline-content">
                                <div class="timeline-date">Q2 2024</div>
                                <div class="timeline-title">Peak de RaaS Operations</div>
                                <div class="timeline-description">
                                    LockBit y BlackCat alcanzan máxima operatividad con +200 afiliados activos, 
                                    ataques automatizados y doble extorsión como estándar.
                                </div>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-marker"></div>
                            <div class="timeline-content">
                                <div class="timeline-date">Q3 2024</div>
                                <div class="timeline-title">Supply Chain Crisis</div>
                                <div class="timeline-description">
                                    Serie coordinada de ataques a proveedores críticos de software, 
                                    afectando miles de organizaciones downstream simultáneamente.
                                </div>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-marker"></div>
                            <div class="timeline-content">
                                <div class="timeline-date">Q4 2024</div>
                                <div class="timeline-title">Weaponización de Deepfakes</div>
                                <div class="timeline-description">
                                    Primeros casos documentados de deepfakes de video utilizados en 
                                    ataques dirigidos a CEOs para transferencias fraudulentas millonarias.
                                </div>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-marker"></div>
                            <div class="timeline-content">
                                <div class="timeline-date">Q1 2025</div>
                                <div class="timeline-title">Cloud-Native Attack Surge</div>
                                <div class="timeline-description">
                                    Ataques específicamente diseñados para infraestructuras cloud: 
                                    container escapes, serverless abuse, y misconfiguration exploitation.
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Interactive Simulator -->
                <section class="simulator-section">
                    <h2 class="simulator-title">🧪 Simulador Elite: Threat Intelligence Analyzer</h2>
                    <p class="simulator-description">
                        Utiliza herramientas profesionales de threat intelligence para analizar indicadores 
                        de compromiso (IoCs), identificar familias de malware y determinar grupos APT responsables.
                    </p>
                    
                    <div class="attack-simulator">
                        <div class="simulator-header">
                            <div class="simulator-title">🔍 CyberSec TI Analyzer v3.1</div>
                            <div>Confianza: <span id="confidenceScore">0%</span></div>
                        </div>
                        
                        <div class="terminal-output" id="tiOutput">
> CyberSec Elite Threat Intelligence Analyzer v3.1
> Copyright 2025 - Advanced Threat Research Division
> ================================================
> 
> [INIT] Cargando módulos de análisis...
> [OK] MITRE ATT&CK Framework v14.1 sincronizado
> [OK] Base de datos de IoCs actualizada (2.4M indicadores)
> [OK] Perfiles de APT y malware families cargados
> [OK] Feeds de threat intelligence activos (15 fuentes)
> [OK] Machine Learning models initialized
> 
> Sistema listo para análisis avanzado de amenazas
> Utiliza los controles para cargar muestras sospechosas
                        </div>
                        
                        <div style="margin: 1rem 0; padding: 1rem; background: rgba(255,255,255,0.05); border-radius: 6px;">
                            <h4>🔍 Indicadores de Muestra Disponibles:</h4>
                            <div style="font-family: monospace; font-size: 0.8rem; margin: 0.5rem 0;">
                                <strong>Archivo Sospechoso:</strong><br>
                                • Hash MD5: 5d41402abc4b2a76b9719d911017c592<br>
                                • Hash SHA256: 2cf24dba4f21d4288094c8b2c50cdd1<br>
                                • Tamaño: 847KB | PE32 executable<br><br>
                                <strong>Infraestructura C2:</strong><br>
                                • IP: 185.220.101.33 (TOR Exit Node)<br>
                                • Domain: secure-banking-update[.]com<br>
                                • C2 Endpoint: /api/v1/beacon/status<br>
                                • User-Agent: Mozilla/5.0 (Windows NT 10.0; x64)<br><br>
                                <strong>Técnicas Observadas:</strong><br>
                                • Process Injection detectado<br>
                                • PowerShell execution con base64<br>
                                • Registry persistence keys
                            </div>
                        </div>
                        
                        <div class="simulator-controls">
                            <button class="sim-btn sim-btn-primary" onclick="analyzeThreat()">🔍 Analizar IoCs</button>
                            <button class="sim-btn sim-btn-secondary" onclick="queryMitre()">🎯 MITRE Mapping</button>
                            <button class="sim-btn sim-btn-secondary" onclick="checkReputations()">🔍 Multi-Source Check</button>
                            <button class="sim-btn sim-btn-secondary" onclick="generateYARA()">📝 Generate YARA</button>
                            <button class="sim-btn sim-btn-secondary" onclick="resetTIAnalyzer()">🔄 Reset</button>
                        </div>
                    </div>
                </section>

                <!-- Industrialización del Cibercrimen -->
                <section class="content-section">
                    <h2 class="section-title">🏭 Industrialización del Cibercrimen</h2>
                    <div class="section-content">
                        <p>
                            <strong>El cibercrimen moderno ha adoptado modelos de negocio legítimos</strong>, 
                            creando verdaderas industrias criminales con estructuras corporativas, 
                            especialización profesional y cadenas de suministro complejas.
                        </p>
                        
                        <h3>Modelo de Criminalidad como Servicio (CaaS)</h3>
                        <ul>
                            <li><strong>Malware-as-a-Service:</strong> Suscripciones mensuales ($50-500) para acceso a malware actualizado</li>
                            <li><strong>Ransomware-as-a-Service:</strong> Programas de afiliados con división 70/30 de ganancias</li>
                            <li><strong>Phishing-as-a-Service:</strong> Plantillas, hosting bulletproof y gestión de campañas</li>
                            <li><strong>Bulletproof Hosting:</strong> Infraestructura resistente a takedowns ($200-2000/mes)</li>
                            <li><strong>Cash-out Services:</strong> Monetización de datos robados (10-20% comisión)</li>
                            <li><strong>Credential Marketplaces:</strong> Venta de accesos comprometidos ($5-5000 según valor)</li>
                        </ul>
                        
                        <h3>Especialización Profesional en el Underground</h3>
                        <p>
                            Roles claramente definidos han emergido en el ecosistema criminal:
                        </p>
                        <ul>
                            <li><strong>Core Developers:</strong> Creadores de malware y exploits</li>
                            <li><strong>Botnet Operators:</strong> Gestión de infraestructura comprometida</li>
                            <li><strong>Initial Access Brokers:</strong> Venta de credenciales y accesos</li>
                            <li><strong>Money Mules & Cashiers:</strong> Lavado y extracción de fondos</li>
                            <li><strong>Carders & Fraudsters:</strong> Especialistas en fraude financiero</li>
                            <li><strong>Technical Support:</strong> Soporte 24/7 para afiliados criminales</li>
                        </ul>
                        
                        <h3>Métricas del Ecosistema Criminal</h3>
                        <p>
                            Los mercados underground generan ingresos estimados en <strong>$6-8 mil millones 
                            anuales</strong>, con márgenes de ganancia superiores al 1000% en algunos servicios.
                        </p>
                    </div>
                </section>

                <!-- Casos de Estudio -->
                <div class="case-study">
                    <div class="case-study-title">📚 Caso de Estudio: SolarWinds SUNBURST (2020)</div>
                    <div class="case-study-content">
                        <p>
                            <strong>Contexto:</strong> Supply chain attack que introdujo el backdoor SUNBURST en 
                            actualizaciones legítimas de SolarWinds Orion, afectando ~18,000 organizaciones 
                            incluyendo agencias gubernamentales y Fortune 500.
                        </p>
                        <p>
                            <strong>Técnicas MITRE:</strong> T1195.002 (Supply Chain Compromise), T1027 (Obfuscated Files), 
                            T1071.001 (Web Protocols)
                        </p>
                        <p>
                            <strong>Lecciones:</strong> Necesidad de SBOM (Software Bill of Materials), firma 
                            verificable de builds, y monitorización de telemetría post-actualización.
                        </p>
                    </div>
                </div>

                <div class="case-study">
                    <div class="case-study-title">📚 Caso de Estudio: Kaseya/REvil (2021)</div>
                    <div class="case-study-content">
                        <p>
                            <strong>Contexto:</strong> REvil distribuyó ransomware a través de un hotfix comprometido 
                            de Kaseya VSA, afectando ~1,500 empresas downstream a través de MSPs.
                        </p>
                        <p>
                            <strong>Impacto:</strong> Demonstró el valor de MSPs como "high-value targets" - un solo 
                            compromiso permitió acceso masivo a clientes finales.
                        </p>
                        <p>
                            <strong>Lecciones:</strong> Segmentación de redes, vetting riguroso de proveedores, 
                            y planes de respuesta específicos para supply chain attacks.
                        </p>
                    </div>
                </div>

                <!-- IOCs y Patrones -->
                <section class="content-section">
                    <h2 class="section-title">🔍 Indicadores de Compromiso (IOCs) - Guía Práctica</h2>
                    <div class="section-content">
                        <p>
                            <strong>Señales clave que indican actividad maliciosa</strong> en tu entorno. 
                            Esta tabla te ayuda a priorizar alertas y respuestas.
                        </p>
                        
                        <table class="ioc-table">
                            <thead>
                                <tr>
                                    <th>Indicador</th>
                                    <th>Señal de Alerta</th>
                                    <th>Amenaza Probable</th>
                                    <th>Acción Inmediata</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Login Atípico</td>
                                    <td>Geolocalización inusual + horarios extraños</td>
                                    <td>Credencial comprometida</td>
                                    <td>Forzar reset de password, revisar MFA</td>
                                </tr>
                                <tr>
                                    <td>Tráfico DNS</td>
                                    <td>Consultas largas con datos base64</td>
                                    <td>DNS tunneling / C2</td>
                                    <td>Bloquear domain, aislar host</td>
                                </tr>
                                <tr>
                                    <td>Ejecutables</td>
                                    <td>Archivos sin firma en <code>%TEMP%</code></td>
                                    <td>Dropper / malware stage 1</td>
                                    <td>Cuarentena, análisis sandbox</td>
                                </tr>
                                <tr>
                                    <td>Archivos Masivos</td>
                                    <td>Renombrado rápido + extensiones inusuales</td>
                                    <td>Ransomware activo</td>
                                    <td>Aislar inmediatamente, restore backups</td>
                                </tr>
                                <tr>
                                    <td>Outbound HTTPS</td>
                                    <td>Beacons regulares a IPs/domains extraños</td>
                                    <td>C2 beacon / exfiltración</td>
                                    <td>Bloquear tráfico, hunt lateral movement</td>
                                </tr>
                                <tr>
                                    <td>PowerShell</td>
                                    <td>Comandos con <code>-EncodedCommand</code></td>
                                    <td>Living-off-the-land attack</td>
                                    <td>Decode payload, buscar persistence</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <h3>Logs Críticos para Monitorear</h3>
                        <ul>
                            <li><strong>Endpoint Telemetry:</strong> Process execution, file system, registry</li>
                            <li><strong>Network Logs:</strong> Proxy, firewall, DNS queries</li>
                            <li><strong>Authentication:</strong> VPN, AD, cloud identity providers</li>
                            <li><strong>Email Security:</strong> ATP alerts, URL detonation</li>
                            <li><strong>Cloud:</strong> API calls, configuration changes, data access</li>
                        </ul>
                    </div>
                </section>

                <!-- Quiz Section -->
                <section class="quiz-section">
                    <h2 class="section-title">🎯 Evaluación Elite de Conocimientos</h2>
                    <div id="quizContainer">
                        <div class="quiz-question" id="currentQuestion">
                            ¿Cuál es la característica principal que distingue a los grupos RaaS modernos de las operaciones de ransomware tradicionales?
                        </div>
                        <ul class="quiz-options" id="quizOptions">
                            <li class="quiz-option" onclick="selectOption(this, false)">
                                A) Utilizan exclusivamente zero-day exploits
                            </li>
                            <li class="quiz-option" onclick="selectOption(this, true)">
                                B) Operan como corporaciones con modelos de negocio sofisticados y programas de afiliados
                            </li>
                            <li class="quiz-option" onclick="selectOption(this, false)">
                                C) Solo atacan infraestructuras gubernamentales
                            </li>
                            <li class="quiz-option" onclick="selectOption(this, false)">
                                D) Requieren conocimientos avanzados de criptografía para participar
                            </li>
                        </ul>
                        <div style="margin-top: 1.5rem;">
                            <button class="sim-btn sim-btn-primary" onclick="checkAnswer()" id="checkBtn">Verificar Respuesta</button>
                            <button class="sim-btn sim-btn-secondary" onclick="nextQuestion()" id="nextBtn" style="display: none;">Siguiente Pregunta</button>
                        </div>
                        <div id="quizFeedback" style="margin-top: 1rem; display: none;"></div>
                    </div>
                </section>

                <!-- Stack Defensivo -->
                <section class="content-section">
                    <h2 class="section-title">🛡️ Stack Defensivo Recomendado</h2>
                    <div class="section-content">
                        <p>
                            <strong>Herramientas y controles esenciales</strong> para defenderse del panorama 
                            de amenazas moderno. Implementación basada en NIST Cybersecurity Framework.
                        </p>
                        
                        <h3>Detección y Respuesta</h3>
                        <ul>
                            <li><strong>EDR/XDR:</strong> CrowdStrike Falcon, SentinelOne, Microsoft Defender for Endpoint</li>
                            <li><strong>SIEM + SOAR:</strong> Splunk, Elastic Security, QRadar con orquestación automatizada</li>
                            <li><strong>NDR:</strong> Darktrace, ExtraHop para detección de lateral movement</li>
                            <li><strong>UEBA:</strong> Análisis de comportamiento de usuarios y entidades</li>
                        </ul>
                        
                        <h3>Protección de Aplicaciones</h3>
                        <ul>
                            <li><strong>WAF / RASP:</strong> Cloudflare, F5 para mitigar OWASP Top 10</li>
                            <li><strong>API Security:</strong> Protección de APIs y microservicios</li>
                            <li><strong>SCA:</strong> Snyk, Veracode para análisis de dependencias</li>
                            <li><strong>DAST/SAST:</strong> Testing dinámico y estático de código</li>
                        </ul>
                        
                        <h3>Controles Fundamentales</h3>
                        <ul>
                            <li><strong>Zero Trust Architecture:</strong> Verificación continua, least privilege</li>
                            <li><strong>MFA + PAM:</strong> Autenticación multifactor y gestión de privilegios</li>
                            <li><strong>Backup 3-2-1-1:</strong> Air-gapped backups con testing regular</li>
                            <li><strong>Patch Management:</strong> Automatizado con priorización por CVSS</li>
                            <li><strong>Network Segmentation:</strong> Microsegmentación y VLANs</li>
                        </ul>
                        
                        <h3>Threat Intelligence</h3>
                        <ul>
                            <li><strong>CTI Feeds:</strong> MISP, ThreatConnect, commercial feeds</li>
                            <li><strong>OSINT:</strong> Shodan, VirusTotal, passive DNS</li>
                            <li><strong>Threat Hunting:</strong> Proactive search for TTPs</li>
                            <li><strong>Incident Response:</strong> Playbooks documentados y simulacros</li>
                        </ul>
                    </div>
                </section>

                <!-- Predicciones y Tendencias Futuras -->
                <section class="content-section">
                    <h2 class="section-title">🔮 Predicciones 2025-2026</h2>
                    <div class="section-content">
                        <p>
                            <strong>Basándose en análisis de tendencias e intelligence</strong>, se proyectan 
                            desarrollos significativos en el panorama para los próximos 18 meses.
                        </p>
                        
                        <h3>Amenazas Emergentes</h3>
                        <ul>
                            <li><strong>Quantum-Resistant Cryptography:</strong> Preparación para amenazas post-cuánticas</li>
                            <li><strong>AI vs AI Warfare:</strong> Batalla entre IA defensiva y ofensiva</li>
                            <li><strong>5G/6G Attack Vectors:</strong> Nuevas superficies en redes móviles</li>
                            <li><strong>Biometric Spoofing 2.0:</strong> Ataques avanzados con deepfakes</li>
                            <li><strong>Satellite & Space Hacking:</strong> Amenazas a infraestructuras espaciales</li>
                            <li><strong>Quantum Computing Threats:</strong> Ruptura de criptografía actual</li>
                        </ul>
                        
                        <h3>Evolución de Defensas</h3>
                        <ul>
                            <li><strong>Autonomous SOCs:</strong> IA para respuesta automatizada</li>
                            <li><strong>Predictive Analytics:</strong> ML para predicción de ataques</li>
                            <li><strong>Behavioral DNA:</strong> Perfiles únicos de usuarios/entidades</li>
                            <li><strong>Quantum-Safe Crypto:</strong> Algoritmos resistentes a computación cuántica</li>
                            <li><strong>Immutable Infrastructure:</strong> Infraestructura tamper-proof</li>
                        </ul>
                        
                        <h3>Recomendaciones Estratégicas</h3>
                        <ul>
                            <li>Inversión en threat intelligence contextual y accionable</li>
                            <li>Desarrollo de capacidades de respuesta automatizada</li>
                            <li>Fortalecimiento masivo de awareness y training continuo</li>
                            <li>Arquitecturas resilientes con redundancia geográfica</li>
                            <li>Colaboración activa en comunidades de ciberseguridad</li>
                            <li>Preparación para regulaciones de IA y quantum computing</li>
                        </ul>
                    </div>
                </section>

                <!-- Segundo Simulador -->
                <section class="simulator-section">
                    <h2 class="simulator-title">🚨 Simulador: Incident Response Dashboard</h2>
                    <p class="simulator-description">
                        Practica la respuesta a incidentes con un escenario realista de brecha de seguridad. 
                        Toma decisiones críticas y observa el impacto en tiempo real.
                    </p>
                    
                    <div class="attack-simulator">
                        <div class="simulator-header">
                            <div class="simulator-title">🚨 SIEM Alert Dashboard - DEFCON 2</div>
                            <div>Incidentes Activos: <span id="activeIncidents">3</span></div>
                        </div>
                        
                        <div class="terminal-output" id="incidentOutput">
> CYBERSEC ELITE - INCIDENT RESPONSE CENTER
> ==========================================
> TIEMPO: 2025-01-15 14:23:45 UTC
> ESTADO: ALERTA CRÍTICA - POSIBLE BRECHA ACTIVA
> 
> [CRÍTICO] 14:20 - Múltiples logins fallidos desde TOR
> [ALTO] 14:21 - PowerShell execution con base64 encoding
> [CRÍTICO] 14:22 - Conexión C2 detectada: 185.220.101.33
> [ALTO] 14:23 - Lateral movement detectado: \\FILE-SRV-01
> 
> IMPACTO ESTIMADO: ALTO
> ACTIVOS COMPROMETIDOS: 3-5 hosts
> DATOS EN RIESGO: Customer PII, Financial records
> 
> ¿Cuál es tu siguiente acción como Incident Commander?
                        </div>
                        
                        <div class="simulator-controls">
                            <button class="sim-btn sim-btn-primary" onclick="isolateHosts()">🔒 Aislar Hosts</button>
                            <button class="sim-btn sim-btn-secondary" onclick="analyzeArtifacts()">🔍 Analizar Artefactos</button>
                            <button class="sim-btn sim-btn-secondary" onclick="notifyStakeholders()">📞 Notificar Stakeholders</button>
                            <button class="sim-btn sim-btn-secondary" onclick="activatePlaybook()">📋 Activar Playbook</button>
                            <button class="sim-btn sim-btn-secondary" onclick="resetIncident()">🔄 Reset</button>
                        </div>
                    </div>
                </section>

                <!-- Navigation -->
                <div class="content-navigation">
                    <a href="index.html" class="nav-btn nav-btn-primary">
                        ← Volver a Módulos
                    </a>
                    <a href="modulo3.html" class="nav-btn nav-btn-primary">
                        Capítulo 3: Herramientas y Practicas Defensivas →
                    </a>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Global variables
        let moduleProgress = 7;
        let tiScore = 0;
        let currentQuestionIndex = 0;
        let quizScore = 0;
        let selectedOption = null;
        let confidenceLevel = 0;
        let incidentScore = 0;

        // Quiz data expanded
        const quizQuestions = [
            {
                question: "¿Cuál es la característica principal que distingue a los grupos RaaS modernos de las operaciones de ransomware tradicionales?",
                options: [
                    "Utilizan exclusivamente zero-day exploits",
                    "Operan como corporaciones con modelos de negocio sofisticados y programas de afiliados", 
                    "Solo atacan infraestructuras gubernamentales",
                    "Requieren conocimientos avanzados de criptografía para participar"
                ],
                correct: 1,
                explanation: "Los grupos RaaS (Ransomware-as-a-Service) han industrializado el cibercrimen, operando como verdaderas corporaciones con departamentos especializados, programas de afiliados, soporte técnico 24/7 y modelos de división de ganancias (típicamente 70/30), democratizando ataques sofisticados."
            },
            {
                question: "En el contexto de ataques Living-off-the-Land, ¿cuál es la ventaja principal para los atacantes?",
                options: [
                    "Permite ejecutar código malicioso sin ser detectado por soluciones tradicionales basadas en firmas",
                    "Garantiza acceso administrativo inmediato",
                    "Elimina la necesidad de command & control",
                    "Proporciona persistencia permanente en el sistema"
                ],
                correct: 0,
                explanation: "Las técnicas LOTL utilizan herramientas legítimas del sistema (PowerShell, WMI, PsExec) para actividades maliciosas, evadiendo la detección basada en firmas ya que estas herramientas son consideradas benignas por los sistemas de seguridad tradicionales."
            },
            {
                question: "Según el framework MITRE ATT&CK, ¿cuál es la técnica T1566.001 y por qué es tan prevalente?",
                options: [
                    "Process Injection - porque es difícil de detectar",
                    "PowerShell execution - porque está disponible en todos los sistemas Windows", 
                    "Spearphishing Attachment - porque explota la confianza humana y evade controles técnicos",
                    "Lateral Movement - porque permite acceso a sistemas críticos"
                ],
                correct: 2,
                explanation: "T1566.001 (Spearphishing Attachment) es extremadamente prevalente porque combina ingeniería social sofisticada con evasión técnica. Los atacantes personalizan mensajes usando OSINT, evaden filtros de email, y explotan la confianza humana - el eslabón más débil en la cadena de seguridad."
            }
        ];

        // Initialize page
        function initializePage() {
            updateProgress();
            console.log('Módulo 2: Amenazas y Vectores de Ataque - Versión Elite cargado');
        }

        function updateProgress() {
            const progressBar = document.getElementById('moduleProgress');
            if (progressBar) {
                progressBar.style.width = moduleProgress + '%';
            }
        }

        function goBack() {
            if (confirm('¿Estás seguro de que quieres volver? Tu progreso se guardará automáticamente.')) {
                window.location.href = "index.html"; 
            }
        }

        function loadChapter(chapterNum) {
            alert(`Cargando Capítulo ${chapterNum}...\n\nEn una implementación completa, esto cargaría contenido específico con:\n• Videos explicativos\n• Labs interactivos\n• Casos de estudio detallados\n• Simuladores avanzados`);
            
            // Update active chapter
            document.querySelectorAll('.chapter-link').forEach(link => {
                link.classList.remove('active');
            });
            if (event && event.target) {
                event.target.closest('.chapter-link').classList.add('active');
            }
        }

        function nextChapter() {
            if (quizScore >= 80) {
                alert('🎉 Excelente trabajo!\n\nHas completado el Capítulo 1 con éxito.\n\nProcediendo al Capítulo 2: Phishing Avanzado & Social Engineering\n\n• Deepfakes y vishing\n• BEC avanzado\n• OSINT para spear phishing\n• Técnicas de evasión');
                moduleProgress = Math.min(moduleProgress + 13, 100);
                updateProgress();
            } else {
                alert('📚 Completa el quiz con al menos 80% de aciertos para continuar al siguiente capítulo.\n\nActual: ' + quizScore + '%');
            }
        }

        // Threat Intelligence Simulator
        function analyzeThreat() {
            const output = document.getElementById('tiOutput');
            confidenceLevel = 0;
            
            output.innerHTML += `
> 
> ==================== ANÁLISIS INICIADO ====================
> [PROCESSING] Analizando hash MD5: 5d41402abc4b2a76b9719d911017c592
> [MATCH] ✓ Detectado en 45/67 engines (VirusTotal)
> [CLASSIFICATION] Familia: TrickBot → Emotet (Confianza: 89%)
> 
> [PROCESSING] Analizando infraestructura C2...
> [MATCH] ✓ IP 185.220.101.33 → TOR Exit Node (Abuse: 98%)
> [GEOLOCATION] Rusia → Patrón típico de APT28/Fancy Bear
> [THREAT ACTOR] Alta probabilidad: TA505 → Emotet Operations
> 
> [PROCESSING] Domain: secure-banking-update[.]com
> [REPUTATION] ✗ Typosquatting detectado (Registrado: 2 días)
> [PATTERN] Patrón típico de BazaLoader campaigns
> 
> === VEREDICTO PRELIMINAR ===
> 🚨 AMENAZA ACTIVA CONFIRMADA
> Familia: Emotet/TrickBot Hybrid
> Actor: TA505 (Fin7 association)
> Objetivo: Credential Harvesting + Ransomware Staging
> Riesgo: CRÍTICO
> Confianza: 89%
`;
            
            confidenceLevel = 89;
            document.getElementById('confidenceScore').textContent = confidenceLevel + '%';
            output.scrollTop = output.scrollHeight;
            tiScore += 30;
        }

        function queryMitre() {
            const output = document.getElementById('tiOutput');
            output.innerHTML += `
> 
> =============== MITRE ATT&CK MAPPING ===============
> [FRAMEWORK] Analizando TTPs observadas...
> 
> 🎯 TÁCTICAS IDENTIFICADAS:
> ┌─ Initial Access
> │  └─ T1566.001: Spearphishing Attachment
> ├─ Execution  
> │  └─ T1059.001: PowerShell Commands
> ├─ Persistence
> │  └─ T1547.001: Registry Run Keys
> ├─ Defense Evasion
> │  ├─ T1055: Process Injection
> │  └─ T1027: Obfuscated Files/Info
> ├─ Discovery
> │  ├─ T1082: System Information Discovery
> │  └─ T1083: File/Directory Discovery
> ├─ Command & Control
> │  └─ T1071.001: Web Protocols (HTTPS)
> └─ Exfiltration
>    └─ T1041: Exfiltration Over C2
> 
> 🔍 KILL CHAIN STAGE: Execution → Persistence
> 📊 SOPHISTICATION: Intermediate-Advanced
> ⚡ PROBABLE NEXT: Credential Dumping (T1003)
`;
            output.scrollTop = output.scrollHeight;
            tiScore += 25;
        }

        function checkReputations() {
            const output = document.getElementById('tiOutput');
            output.innerHTML += `
> 
> ============= MULTI-SOURCE REPUTATION CHECK =============
> [OSINT] Consultando 15+ fuentes de threat intelligence...
> 
> 🔍 RESULTADOS:
> [VirusTotal] 45/67 detecciones → MALICIOSO
> [AbuseIPDB] IP: 98% confianza maliciosa (347 reportes)
> [URLVoid] Domain: 12/30 blacklists → SOSPECHOSO
> [Shodan] Puerto 443: Certificado autofirmado (Red flag)
> [PassiveTotal] Domain age: 2 días → FRESHLY REGISTERED
> [ThreatCrowd] 23 samples relacionados → CAMPAIGN ACTIVA
> [Hybrid Analysis] Sandbox: Keylogger + Screen capture
> [Any.run] Behavioral: Registry persistence + C2 beacon
> 
> 🚨 VEREDICTO CONSOLIDADO:
> ════════════════════════════════════════════════════════
> AMENAZA CONFIRMADA - CAMPAÑA ACTIVA
> Recomendación: BLOQUEO INMEDIATO
> Alertar a: SOC, Threat Hunting Team, CISO
> Escalar: Incident Response Level 2
> 
> ⚠️  ACCIONES CRÍTICAS:
> 1. Block IoCs en todos los security layers
> 2. Hunt for additional indicators
> 3. Verificar lateral movement
> 4. Preparar containment procedures
`;
            output.scrollTop = output.scrollHeight;
            
            tiScore += 35;
            confidenceLevel = 96;
            document.getElementById('confidenceScore').textContent = confidenceLevel + '%';
        }

        function generateYARA() {
            const output = document.getElementById('tiOutput');
            output.innerHTML += `
> 
> ================ YARA RULE GENERATION ================
> [AI-ASSISTED] Generando regla de detección...
> 
> rule Emotet_TrickBot_Hybrid_Campaign {
>     meta:
>         description = "Detecta variante Emotet/TrickBot"
>         author = "CyberSec Elite TI Team"
>         date = "2025-01-15"
>         threat_actor = "TA505"
>         confidence = "HIGH"
>         mitre_attack = "T1566.001,T1055,T1059.001"
> 
>     strings:
>         $c2_domain = "secure-banking-update.com" nocase
>         $powershell_b64 = { 706f77657273686c6c2e657865202d456e63 }
>         $inject_pattern = { 48 89 4C 24 08 48 83 EC 28 48 8B }
>         $persistence_reg = "Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Run"
> 
>     condition:
>         2 of them or 
>         ($c2_domain and filesize < 2MB)
> }
> 
> ✅ REGLA GENERADA Y LISTA PARA DEPLOYMENT
> 📤 Exportada para: SIEM, EDR, Network Detection
`;
            output.scrollTop = output.scrollHeight;
            tiScore += 20;
        }

        function resetTIAnalyzer() {
            document.getElementById('tiOutput').innerHTML = `> CyberSec Elite Threat Intelligence Analyzer v3.1
> Copyright 2025 - Advanced Threat Research Division
> ================================================
> 
> [INIT] Cargando módulos de análisis...
> [OK] MITRE ATT&CK Framework v14.1 sincronizado
> [OK] Base de datos de IoCs actualizada (2.4M indicadores)
> [OK] Perfiles de APT y malware families cargados
> [OK] Feeds de threat intelligence activos (15 fuentes)
> [OK] Machine Learning models initialized
> 
> Sistema listo para análisis avanzado de amenazas
> Utiliza los controles para cargar muestras sospechosas`;
            
            confidenceLevel = 0;
            document.getElementById('confidenceScore').textContent = '0%';
            tiScore = 0;
        }

        // Incident Response Simulator
        function isolateHosts() {
            const output = document.getElementById('incidentOutput');
            output.innerHTML += `
> 
> [ACCIÓN] Ejecutando aislamiento de hosts...
> [OK] Host WKS-001: Red desconectada, análisis forense iniciado
> [OK] Host WKS-005: Cuarentena aplicada
> [OK] Host FILE-SRV-01: Segmentación temporal activada
> 
> ✅ CONTENCIÓN EXITOSA - Lateral movement detenido
> 📊 Impacto reducido de ALTO → MEDIO
> ⏱️  Response time: 4 minutos (Excelente)
> 
> SIGUIENTE PASO RECOMENDADO: Análisis forense de artefactos
`;
            output.scrollTop = output.scrollHeight;
            incidentScore += 40;
            document.getElementById('activeIncidents').textContent = '2';
        }

        function analyzeArtifacts() {
            const output = document.getElementById('incidentOutput');
            output.innerHTML += `
> 
> [FORENSE] Analizando artefactos en hosts comprometidos...
> [FINDING] Registry persistence: HKCU\\...\\Run\\SecurityUpdate
> [FINDING] PowerShell log: Base64 encoded payload detectado
> [FINDING] Prefetch: Ejecución de "invoice_Q4_2024.exe"
> [FINDING] Network: Beacons C2 cada 300 segundos
> 
> 🔍 TIMELINE RECONSTRUCTED:
> 14:15 - Email phishing recibido (CFO spoofed)
> 14:18 - User abrió attachment malicioso  
> 14:19 - PowerShell dropper ejecutado
> 14:20 - C2 establecido, credential harvesting
> 14:22 - Lateral movement via SMB
> 
> 💡 ROOT CAUSE: Spear phishing + macro habilitado
`;
            output.scrollTop = output.scrollHeight;
            incidentScore += 30;
        }

        function notifyStakeholders() {
            const output = document.getElementById('incidentOutput');
            output.innerHTML += `
> 
> [COMUNICACIÓN] Notificando stakeholders críticos...
> [SENT] CISO: Alert crítica + brief ejecutivo
> [SENT] Legal: Posible brecha de PII - evaluar notificación
> [SENT] PR Team: Preparar statement si necesario
> [SENT] Business Units: Sistemas afectados identificados
> 
> 📞 BRIDGE CALL activado: War room establecido
> 📋 DOCUMENTATION: Incident ticket INC-2025-0115-001
> ⚠️  SLA Status: Dentro de ventana de 1 hora
> 
> STAKEHOLDERS INFORMADOS - Communications handled
`;
            output.scrollTop = output.scrollHeight;
            incidentScore += 20;
        }

        function activatePlaybook() {
            const output = document.getElementById('incidentOutput');
            output.innerHTML += `
> 
> [PLAYBOOK] Activando "Malware Containment & Eradication"
> [STEP 1] ✅ Containment completado
> [STEP 2] ⏳ Forensic analysis en progreso...  
> [STEP 3] 🕒 Eradication preparada
> [STEP 4] 🕒 Recovery procedures standby
> 
> 📋 CHECKLIST AUTOMÁTICO:
> ☑️ Preserved forensic images
> ☑️ IoCs extracted and shared
> ☑️ Threat hunting initiated  
> ☐ Clean backup verification
> ☐ System rebuild approval
> ☐ Lessons learned session
> 
> 🎯 ESTIMATED RECOVERY: 8-12 horas
> 💰 ESTIMATED IMPACT: $45,000-80,000
> 
> PLAYBOOK EXECUTION: 85% completado
`;
            output.scrollTop = output.scrollHeight;
            incidentScore += 25;
        }

        function resetIncident() {
            document.getElementById('incidentOutput').innerHTML = `> CYBERSEC ELITE - INCIDENT RESPONSE CENTER
> ==========================================
> TIEMPO: 2025-01-15 14:23:45 UTC
> ESTADO: ALERTA CRÍTICA - POSIBLE BRECHA ACTIVA
> 
> [CRÍTICO] 14:20 - Múltiples logins fallidos desde TOR
> [ALTO] 14:21 - PowerShell execution con base64 encoding
> [CRÍTICO] 14:22 - Conexión C2 detectada: 185.220.101.33
> [ALTO] 14:23 - Lateral movement detectado: \\FILE-SRV-01
> 
> IMPACTO ESTIMADO: ALTO
> ACTIVOS COMPROMETIDOS: 3-5 hosts
> DATOS EN RIESGO: Customer PII, Financial records
> 
> ¿Cuál es tu siguiente acción como Incident Commander?`;
            
            document.getElementById('activeIncidents').textContent = '3';
            incidentScore = 0;
        }

        // Quiz functions
        function selectOption(element, isCorrect) {
            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            element.classList.add('selected');
            selectedOption = { element, isCorrect };
        }

        function checkAnswer() {
            if (!selectedOption) {
                alert('Por favor selecciona una respuesta antes de continuar.');
                return;
            }

            const feedback = document.getElementById('quizFeedback');
            const checkBtn = document.getElementById('checkBtn');
            const nextBtn = document.getElementById('nextBtn');

            if (selectedOption.isCorrect) {
                selectedOption.element.classList.add('correct');
                feedback.innerHTML = '<div style="color: #10b981; font-weight: 600;">✅ ¡Correcto! ' + quizQuestions[currentQuestionIndex].explanation + '</div>';
                quizScore += Math.floor(100 / quizQuestions.length);
            } else {
                selectedOption.element.classList.add('incorrect');
                document.querySelectorAll('.quiz-option').forEach((opt, index) => {
                    if (index === quizQuestions[currentQuestionIndex].correct) {
                        opt.classList.add('correct');
                    }
                });
                feedback.innerHTML = '<div style="color: #ef4444; font-weight: 600;">❌ Incorrecto. ' + quizQuestions[currentQuestionIndex].explanation + '</div>';
            }

            feedback.style.display = 'block';
            checkBtn.style.display = 'none';
            nextBtn.style.display = 'inline-flex';

            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.style.pointerEvents = 'none';
            });
        }

        function nextQuestion() {
            currentQuestionIndex++;
            
            if (currentQuestionIndex < quizQuestions.length) {
                loadQuestion(currentQuestionIndex);
            } else {
                showQuizResults();
            }
        }

        function loadQuestion(index) {
            const question = quizQuestions[index];
            document.getElementById('currentQuestion').textContent = question.question;
            
            const optionsContainer = document.getElementById('quizOptions');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, i) => {
                const li = document.createElement('li');
                li.className = 'quiz-option';
                li.textContent = String.fromCharCode(65 + i) + ') ' + option;
                li.onclick = () => selectOption(li, i === question.correct);
                optionsContainer.appendChild(li);
            });

            document.getElementById('quizFeedback').style.display = 'none';
            document.getElementById('checkBtn').style.display = 'inline-flex';
            document.getElementById('nextBtn').style.display = 'none';
            selectedOption = null;
        }

        function showQuizResults() {
            const percentage = Math.round((quizScore / 100) * 100);
            let message = `🎯 Quiz Completado!\n\nPuntuación: ${quizScore}/100 puntos (${percentage}%)\n\n`;
            
            if (percentage >= 90) {
                message += '🏆 EXCELENTE! Dominio elite de conceptos de amenazas.\n✅ Puedes continuar al siguiente capítulo con confianza.';
                moduleProgress = Math.min(moduleProgress + 18, 100);
            } else if (percentage >= 80) {
                message += '👍 MUY BIEN! Buen entendimiento del panorama de amenazas.\n✅ Puedes continuar al siguiente capítulo.';
                moduleProgress = Math.min(moduleProgress + 15, 100);
            } else {
                message += '📚 NECESITAS MEJORAR. Revisa el material antes de continuar.\n⚠️ Recomendamos repasar los conceptos clave.';
            }
            
            alert(message);
            updateProgress();
        }

        // Performance tracking
        function trackProgress() {
            const totalScore = tiScore + incidentScore + quizScore;
            const performanceLevel = totalScore >= 200 ? 'Elite' : 
                                   totalScore >= 150 ? 'Advanced' : 
                                   totalScore >= 100 ? 'Intermediate' : 'Beginner';
            
            console.log(`Performance Level: ${performanceLevel} (Score: ${totalScore})`);
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
            
            // Add some interactive enhancements
            document.querySelectorAll('.stat-card').forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-5px)';
                    this.style.boxShadow = '0 8px 25px rgba(0,0,0,0.15)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                    this.style.boxShadow = '0 4px 12px rgba(0,0,0,0.05)';
                });
            });
            
            // Auto-update progress periodically
            setInterval(trackProgress, 30000);
        });

        // Add keyboard shortcuts for power users
        document.addEventListener('keydown', function(event) {
            if (event.ctrlKey && event.key === 'r') {
                event.preventDefault();
                if (confirm('¿Resetear simuladores?')) {
                    resetTIAnalyzer();
                    resetIncident();
                }
            }
        });

        // Advanced functionality for elite users
        function exportThreatReport() {
            const report = {
                timestamp: new Date().toISOString(),
                threats_analyzed: ['Emotet/TrickBot', 'APT28', 'BazaLoader'],
                confidence_level: confidenceLevel,
                mitre_tactics: ['T1566.001', 'T1059.001', 'T1055'],
                recommendations: [
                    'Implement advanced email filtering',
                    'Deploy behavioral analysis',
                    'Enhance user awareness training',
                    'Regular YARA rule updates'
                ]
            };
            
            console.log('Threat Intelligence Report:', JSON.stringify(report, null, 2));
            alert('📊 Reporte exportado a consola del navegador\n\nEn una implementación real, esto se exportaría a formatos STIX/TAXII para sharing con la comunidad de threat intelligence.');
        }

        // Easter egg for power users
        let konami = [];
        document.addEventListener('keydown', function(e) {
            konami.push(e.key);
            if (konami.length > 10) konami.shift();
            if (konami.join('') === 'ArrowUpArrowUpArrowDownArrowDownArrowLeftArrowRightArrowLeftArrowRightba') {
                alert('🔥 MODO ELITE ACTIVADO!\n\nAcceso a funciones avanzadas:\n• Export threat reports\n• Advanced YARA generation\n• Custom IoC hunting\n• API integrations');
                // Unlock advanced features
                document.body.classList.add('elite-mode');
            }
        });
    </script>
    
</body>
</html>